/*!
 * Live800 Copyright 2019 GoldArmor Technology Inc.
 */
!function(d){if(!d.body||"1"!==d.body.getAttribute("lim:initchat")){var isIE6=!1,isMobile=!1,isSougou=!1,isSSLReq=!1,scripts=document.scripts;try{for(var i=0;i<scripts.length;i++)scripts[i].src.indexOf("monitor.js")>-1&&scripts[i].src.indexOf("https:")>-1&&(isSSLReq=!0)}catch(e){}"undefined"==typeof jsessionId&&(window.jsessionId="");var browserDect=function(e,t){this.bname="",this.bversion="",this.os="",this.ismobile=0,this.width=e.screen.width,this.height=e.screen.height,this.ua=t.toLowerCase();!function(e){for(var t=[{reg:/360se/,name:"360se"},{reg:/360ee/,name:"360ee"},{reg:/lbbrowser/,name:"lbbrowser"},{reg:/mxios|maxthon/,name:"maxthon"},{reg:/fingerbrowser/,name:"FingerBrowser"},{reg:/sogou/,name:"sougou"},{reg:/lg-/,name:"lg"},{reg:/htc/,name:"htc"},{reg:/(qqbrowser|mqqbrowser|qq)\/(\d+)/,name:"qqbrowser"},{reg:/tencenttraveler\s((\d+\.)+\d+)|qqbrowser\/(\d+)/,name:"tencenttraveler"},{reg:/greenbrowser/,name:"greenbrowser"},{reg:/the world/,name:"theworld"},{reg:/myie(\d)/,name:"myie"},{reg:/msie\s(\d+\.\d+)/,name:"ie"},{reg:/baidu|bidubrowser/,name:"baidu"},{reg:/ucweb(?:\/)?(\d+\.\d+)?/,name:"ucweb"},{reg:/(ucbrowser|ubrowser)\/((\d+\.)+\d+)/,name:"ucweb"},{reg:/minibrowser/,name:"mini"},{reg:/quark/,name:"quark"},{reg:/2345browser/,name:"2345browser"},{reg:/gnbr|gionee/,name:"jinli"},{reg:/sm919|oc105/,name:"cuizi"},{reg:/eben/,name:"8848"},{reg:/vivo/,name:"vivo"},{reg:/huawei/,name:"huawei"},{reg:/lenovo/,name:"lenovo"},{reg:/samsung/,name:"samsung"},{reg:/xiaomi/,name:"xiaomi"},{reg:/oppo/,name:"oppo"},{reg:/mz-/,name:"meizu"},{reg:/opera|opr/,name:"opera"},{reg:/firefox|fxios/,name:"firefox"},{reg:/chrome\/((\d+\.)+\d+)\s(?:.*)edge/,name:"edge"},{reg:/chrome\/((\d+\.)+\d+)/,name:"chrome"},{reg:/[cC]ri[oO][sS]\/((\d+\.)+\d+)/,name:"chrome"},{reg:/version\/((\d+\.)+\d+)\s(?:.*)safari/,name:"safari"},{reg:/cpu.*version\/((\d+\.)+\d+)\s(?:.*)safari/,name:"safari"},{reg:/(?=firefox.+)navigator\/((\d+\.)+\d+)|netscape\/((\d+\.)+\d+)/,name:"netscape"}],i=0;i<t.length;i++){var n=e.ua.match(t[i].reg);if(n){e.bname=t[i].name,n[1]&&(e.bversion=n[1]);break}}var o=e.ua.match(/trident\/7.*rv[ :]*11/);"ActiveXObject"in window&&o&&0!=o.length&&0!=o[0].length&&(e.bversion="11.0",e.bname="ie");var a={windows98:/windows\s98/,windowsme:/windows\sme/,windows2000:/windows\snt\s5\.0/,windowsxp:/windows\snt\s5\.1/,windows2003:/windows\snt\s5\.2/,windowsvista:/windows\snt\s6\.0/,windows7:/windows\snt\s6\.1/,windows8:/windows\snt\s6\.2/,"windows8.1":/windows\snt\s6\.3/,windows10:/windows\snt\s10\.0/,windows:/windows/,mac:/macintosh;[\w;\s]+mac\sos\sx\s((\d+[\._])+\d+)/,android:/android\s((\d+\.)+\d+)/,linux:/linux/,windowsphone:/windows\sphone\sos\s(\d+\.)+\d+/,ios_iphone:/i[Pp]hone\s?\d{0,};[\w;\s]+i[Pp]hone\s[Oo][Ss]\s((\d+_)+\d+)/,ios_ipod:/ipod;[\w;\s]+iphone\sos\s((\d+_)+\d+)/,ios_ipad:/ipad;[\w;\s]+os\s((\d+_)+\d+)/,ios:/ios;[\w;\s]+os\s((\d+_)+\d+)/,blackberry:/blackberry/,symbian:/symbianos\/(\d+\.\d+)/,webos:/hpwos\/((\d+\.)+\d+)/};for(var s in a){var r=e.ua.match(a[s]);if(r){e.os=s+(r.length>1?" "+r[1]:"");break}}e.ua.match(/android|iphone|ipad|ipod|phone|blackberry|mobile|symbianos/)&&(e.ismobile=1)}(this)};browseInfo=new browserDect(window,navigator.userAgent.toString()),isMobile=1==browseInfo.ismobile,isSougou="sougou"==browseInfo.bname,isIE6="ie"==browseInfo.bname&&parseFloat(browseInfo.bversion)<7;var isOpenNewTab=isMobile;if(!document.getElementById("live800:link"))if(isIE6&&"undefined"==typeof live800_renderid)document.write("<a href='javascript:void(0);' id='live800:link' style='display:none;position:absolute;top:0px;left:0;width:0;height:0'>&#160;</a>");else{var live800link=document.createElement("a");live800link.setAttribute("href","javascript:void(0);"),live800link.setAttribute("id","live800:link"),live800link.setAttribute("style","display:none;position:absolute;top:0px;left:0;width:0;height:0"),live800link.innerHTML="&#160;",document.body.appendChild(live800link)}window.reloadClientConfig=function(){var e=cfg.invite;(cfg=loadConfig()).invite=e,cfg.invite.live800_invite_title="Invite"};var fn={get:function(e){return d.getElementById(e)},$tagName:function(e){return d.getElementsByTagName(e)},addClass:function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");if(!e.className.match(i))return e.className+=" "+t,e},removeClass:function(e,t){var i=new RegExp("(^|\\s)"+t),n=e.className;return n.match(i)&&(e.className=n.replace(i,"")),e},getServerPrefix:function(){this.vernier||(this.vernier=0);var e="";return this.vernier<cfg.servers.length?(e=cfg.servers[this.vernier],this.vernier++):(this.vernier=0,e=cfg.servers[0]),"https:"==location.protocol?e.replace(/http:/,"https:"):e},$class:function(e,t){for(var i=(t||d.body).getElementsByTagName("*"),n=i.length,o=[],a=0;a<n;a++)i[a].className.match(new RegExp("(^|\\s)"+e+"(\\s|$)"))&&o.push(i[a]);return o},unescapeHTML:function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.innerText?t.innerText:t.textContent},escapeHTML:function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},domReady:function(e){if(fn.done)return e();fn.timer?fn.ready.push(e):(fn.addEvent(window,"load",fn.isDOMReady),fn.ready=[e],fn.timer=setInterval(function(){fn.isDOMReady()},50))},isDOMReady:function(){if(fn.done)return!1;if(d&&d.getElementsByTagName&&d.getElementById&&d.body){clearInterval(fn.timer),fn.timer=null;for(var e=0;e<fn.ready.length;e++)fn.ready[e]();fn.ready=null,fn.done=!0}},createNode:function(e,t,i){var n=d.createElement(e);for(var o in t)n.setAttribute(o,t[o]);return i&&(n.className=i),n},addEvent:function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i,!1)},urlEncode:function(e){if(null==e||""==e)return"";var t="";function i(e){return e.toString(16).toUpperCase()}for(var n,o=0,a=e.length;o<a;o++)(n=e.charCodeAt(o))<16?t+="%0"+n.toString(16).toUpperCase():n<128?t+=32==n?"+":n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?e.charAt(o):"%"+i(n):n<2048?(t+="%"+i(192+(n>>6)),t+="%"+i(128+n%64)):(t+="%"+i(224+(n>>12)),t+="%"+i(128+(n>>6)%64),t+="%"+i(128+n%64));return t},urlDecode:function(e){if(null==e||""==e)return"";var t="";for(var i,n=0,o=e.length;n<o;)"%"==e.charAt(n)?"e"==(i=e.charAt(n+1)).toLowerCase()?(t+=String.fromCharCode(4096*(parseInt("0x"+e.substr(n+1,2))-224)+64*(parseInt("0x"+e.substr(n+4,2))-128)+(parseInt("0x"+e.substr(n+7,2))-128)),n+=9):"c"==i.toLowerCase()||"d"==i.toLowerCase()?(t+=String.fromCharCode(64*(parseInt("0x"+e.substr(n+1,2))-192)+parseInt("0x"+e.substr(n+4,2))-128),n+=6):(t+=String.fromCharCode(parseInt("0x"+e.substr(n+1,2))),n+=3):(t+=e.charAt(n).replace(/\+/," "),n++);return t},urlToParams:function(e){for(cmdMap=new Array,cmdParams=new Array,pos=-1;newPos=e.indexOf("&",pos+1),newPos>=0?encodedProperty=e.substring(pos+1,newPos):encodedProperty=e.substring(pos+1,e.length),equalsPos=encodedProperty.indexOf("="),paramName=encodedProperty.substring(0,equalsPos),paramValue=encodedProperty.substring(equalsPos+1,encodedProperty.length),cmdParams[paramName]=paramValue,-1!=newPos;)pos=newPos;return cmdParams},paramsToUrl:function(e){var t="";for(var i in e)""!=e[i]&&"function"!=typeof e[i]&&(t=t+i+"="+encodeURIComponent(e[i])+"&");return t.substring(0,t.length-1)},isCookie:function(){d.cookie="testcookie=testvalue";return-1!=new String(d.cookie).indexOf("testcookie=testvalue")&&(fn.delCookie("testcookie"),!0)},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var i=fn.getCookie(e);null!=i&&(document.cookie=e+"="+i+";expires="+t.toGMTString())},setCookie:function(e,t,i){var n=new Date;i&&parseInt(i)>0?n.setTime(n.getTime()+1e3*i):n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires = "+n.toGMTString()+";path=/"},setSessionCookie:function(e,t){document.cookie=e+"="+escape(t)+";path=/"},getCookie:function(e){var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=d.cookie.match(i))?unescape(t[2]):null},dragWindow:function(e,t,i){e&&(e.onmouseover=function(){e.style.cursor="move",window.ActiveXObject&&(e.onselectstart=function(){event.returnValue=!1},t.onselectstart=function(){event.returnValue=!1}),e.onmousedown=function(e){e=window.event||e,i&&(clearTimeout(i.floattimer),i.floattimer=null),fn.addClass(t,"drag"),fn.removeClass(t,"release"),t.currentX=(e.pageX?e.pageX:e.clientX)-t.offsetLeft,t.currentY=(e.pageY?e.pageY:e.clientY)-t.offsetTop,d.onmousemove=function(e){e=window.event||e;try{"ie"===browseInfo.bname&&11!=parseInt(browseInfo.bversion)?(t.style.left=e.clientX-t.currentX+"px",t.style.top=e.clientY-t.currentY+"px"):e.pageX&&(t.style.left=e.pageX-t.currentX+"px",t.style.top=e.pageY-t.currentY+"px")}catch(i){}},d.onmouseup=function(){fn.addClass(t,"release"),fn.removeClass(t,"drag"),d.onmousemove=function(){},d.onmouseup=function(){}}}})},isBaidu:function(e){var t=e.match(/[a-zA-Z0-9\u4E00-\u9FA5][\-a-zA-Z0-9\u4E00-\u9FA5]{0,62}(\.[a-zA-Z0-9\u4E00-\u9FA5][\-a-zA-Z0-9\u4E00-\u9FA5]{0,62})+/gi);return!!(t&&t[0].indexOf(".baidu.")>0)},getBDParam:function(e,t){for(var i=null,n=0,o=t.length;n<o;n++){var a=e.indexOf(t[n]);if(a>0){var s=e.indexOf("&",a+1);s<0&&(s=e.length),i=[t[n],e.substring(a+t[n].length,s)];break}}return i},getBaiduWd:function(e){return fn.getBDParam(e,["&wd=","&word=","&rqwd=","?wd=","?word=","?rqwd="])},getBDEqid:function(e){return fn.getBDParam(e,["&eqid=","?eqid="])},hexToRGB:function(e){var t=[];if("string"==typeof e&&/(^#?[0-9a-zA-Z]{6}$)|(^#?[0-9a-zA-Z]{3}$)/.test(e)){if(3===(e=e.replace("#","")).length)t=e.match(/[0-9a-zA-Z]/g);else{if(6!==e.length)return!1;t=e.match(/[0-9a-zA-Z]{2}/g)}return{R:parseInt(t[0],16),G:parseInt(t[1],16),B:parseInt(t[2],16)}}return!1},isLightness:function(e){var t=this.hexToRGB(e);return!!t&&.299*t.R+.587*t.G+.114*t.B>=192}},vis={startflag:!1,actions:[],justUrlLen:function(){var e=fn.urlEncode(d.URL),t=fn.getCookie("pageReferrInSession"),i=document.referrer;(null===t||""===t||t!=i&&fn.isBaidu(i))&&null!==(t=i)&&""!==t&&fn.setSessionCookie("pageReferrInSession",t);var n,o=fn.urlEncode(t),a=fn.getCookie("firstEnterUrlInSession");if(null!=a&&""!=a?a=fn.urlEncode(a):(a=fn.urlEncode(window.location),fn.setSessionCookie("firstEnterUrlInSession",window.location)),((n=d.title.length>80?fn.urlEncode(d.title.substring(0,80)):fn.urlEncode(d.title))+e+o).length>1600){if(n.length>198&&(n=n.substring(0,198)),e.length>=700&&(e=e.substring(0,700)),o.length>=700)if(o=o.substring(0,700),fn.isBaidu(t)){var s=fn.getBaiduWd(t),r=fn.getBDEqid(t);if(null!==s||null!==r){var l=fn.urlDecode(o);if(null!==s){var c=fn.getBaiduWd(l);null===c?l=l+s[0]+s[1]:s[1]!==c[1]&&(l=l.replace(s[0],s[0]+s[1]+"&"))}if(null!==r){var h=fn.getBDEqid(l);null===h?l=l+r[0]+r[1]:r[1]!==h[1]&&(l=l.replace(r[0],r[0]+r[1]+"&"))}fn.setSessionCookie("pageReferrInSession",l),o=fn.urlEncode(l)}}}vis.page={title:n,location:e,referrer:o,firstenterurl:a}},getParam:function(){var e="";if("65654"==cfg.companyId||"66181"==cfg.companyId){var t=window["lim:skills"];void 0!==t&&t.length>0&&(e=e+"&skillId="+t[0])}return e},getProtocol:function(){var t=document.scripts,i="http:";try{for(var n=0;n<t.length;n++)t[n].src.indexOf("monitor.js")>-1&&(i=t[n].src.split(":")[0]+":")}catch(e){}return i},close:function(){try{globalVisitHandle.pageChater.closePageChat()}catch(e){}},openWindow:function(t){var i=globalWindowAttribute||"toolbar=0,scrollbars=0,location=0,menubar=0,resizable=1,width=920,height=620,left="+(window.screen.width-920)/2+",top="+(window.screen.height-620)/2,n=vis.getCallUrl();if("undefined"!=typeof clientPreferenceLanguage&&(n+="&preferenceLanguage="+clientPreferenceLanguage),isOpenNewTab&&t&&t.nodeName&&1==t.nodeType)return t.setAttribute("href",n),!0;"undefined"!=typeof this.chatWindow&&null!=this.chatWindow||(this.chatWindow=navigateToUrl(n,"chatbox"+cfg.companyId,i));try{this.chatWindow.focus(),this.chatWindow.opener=window}catch(e){this.chatWindow=navigateToUrl(n,"chatbox"+cfg.companyId,i)}return!1},opendChat:function(e){return vis.close(),vis.customAction(),vis.openWindow(e)},customAction:function(){if("85742"==cfg.companyId)try{_gat._getTracker("UA-8318333-3")._trackEvent("Live800 Invite","CHAT")}catch(e){}},getCallUrl:function(){var e=cfg.jid,t=vis.getParam(),i=cfg.visitorInfo,n=cfg.enterurl,o=cfg.webAppUrl+"/chatClient/chatbox.jsp"+jsessionId+"?companyID="+cfg.companyId+(""!=cfg.invite.live800_bind_operator&&"undefined"!=typeof cfg.invite.live800_bind_operator?"&operatorId="+cfg.invite.live800_bind_operator:"")+(""!=cfg.invite.live800_bind_skill&&"undefined"!=typeof cfg.invite.live800_bind_skill?"&skillId="+cfg.invite.live800_bind_skill:"")+(""!=e?"&jid="+e:"")+(""!=t?"&"+t:"")+(i?"&"+i:"");return cfg.configId&&(o+="&configID="+cfg.configId),cfg.locale&&(o+="&lan="+cfg.locale),o+="&chatType=1&accept=1",(n||"null"==n)&&(n=fn.urlEncode(d.URL)),o+"&enterurl="+n},share:function(){if(!document.getElementById("lim:sharedObject")){var t="<div id='lim:sharedObject' style='position:absolute;z-index:-3;top:0;left:0;visibility:hidden'></div>";if(isIE6&&"undefined"==typeof live800_renderid)d.write(t);else{var i=document.createElement("div");document.body.appendChild(i),i.innerHTML=t}t="<iframe id='lim:share' name='lim:share' height='0' width='0' src='"+cfg.baseChatHtmlDir+"/shared.html?companyID="+cfg.companyId+"&configID="+cfg.configId+"'></iframe>";try{fn.get("lim:sharedObject").innerHTML=t,fn.addEvent(fn.get("lim:share"),"load",function(){vis.completed=!0})}catch(e){fn.addEvent(window,"load",function(){fn.get("lim:sharedObject").innerHTML=t,fn.addEvent(fn.get("lim:share"),"load",function(){vis.completed=!0})})}}},init:function(){cfg.invite=fn.urlToParams(cfg.configContent),"undefined"!=typeof autoInitialChat&&(cfg.autoInitialChat=fn.urlToParams(autoInitialChat),"undefined"==typeof cfg.autoInitialChat.delayTime&&(cfg.autoInitialChat.delayTime="3"),"undefined"==typeof cfg.autoInitialChat.chatMethod&&(cfg.autoInitialChat.chatMethod="3"),"undefined"==typeof cfg.autoInitialChat.chatType&&(cfg.autoInitialChat.chatType="0"),"undefined"==typeof cfg.autoInitialChat.chatInviteAmount&&(cfg.autoInitialChat.chatInviteAmount="2"),"undefined"==typeof cfg.autoInitialChat.chatIntervalsTime&&(cfg.autoInitialChat.chatIntervalsTime="45"),"undefined"==typeof cfg.autoInitialChat.chatIntervalsTime&&(cfg.autoInitialChat.chatFailuretime="60")),"1"==cfg.invite.initiated_chat_compatibility&&(vis.compatibility=!0),vis.share();try{-[1]||"BODY"!=fn.get("lim:sharedObject").parentNode.tagName?vis.isNeedLazy=!0:vis.isNeedLazy=!1}catch(e){vis.isNeedLazy=!0}},monitor:function(){globalSendDriver=new SendDriver,globalReceiveDriver=new ReceiveDriver,globalVisitClient=new VisitClient,globalVisitServer=new VisitServer,globalVisitHandle=new VisitHandle,"undefined"!=typeof mobile_icons_cfg&&browseInfo.ismobile&&(globalMobileIcon=new MobileIcon),globalVisitClient.start()},getSkin:function(){var e=cfg.invite.live800_invite_top,t=cfg.invite.live800_invite_style,i={id:"invite_style",type:"text/css",rel:"stylesheet",href:fn.getServerPrefix()+"/chatClient/invite/theme/0/invite.css"+(isSSLReq?"?ss=1":"")};if(void 0===t&&(t=cfg.invite.live800_invite_style=0),0==e||1==e)i.href=fn.getServerPrefix()+"/chatClient/invite/theme/"+t+"/invite.css"+(isSSLReq?"?ss=1":"");else if(2==e){var n=fn.urlToParams(cfg.customContent);if(n.interface_type){var o=n.interface_type;0==o||2==o?i.href=fn.getServerPrefix()+"/chatClient/invite/simple.css"+(isSSLReq?"?ss=1":""):1==o&&(i.href=n.link)}}return fn.createNode("link",i)},loadChatSkin:function(e){var t={id:"mini_chat_style",type:"text/css",rel:"stylesheet"};return t.href=fn.getServerPrefix()+"/chatClient/version8/css/chatEntry.css?v=20180511",fn.createNode("link",t)},loadSkin:function(){if(fn.get("invite_style")||fn.$tagName("head")[0].appendChild(vis.getSkin()),!("5"!=live800_chatVersion||isMobile||fn.get("mini_chat_style")||"undefined"!=typeof onlyShowInvite&&0!=onlyShowInvite))var e=setInterval(function(){if(fn.get("lim_mini")&&fn.get("lim_mini_wrap")){clearInterval(e);var t=fn.get("lim_mini").style,i=fn.get("lim_mini_wrap").style,n=null==cfg.invite.sideSpace?"50px":cfg.invite.sideSpace+"px",o=fn.hexToRGB(live800_chatSkinColor);function a(){var e=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-60;e<cfg.invite.windowLength?i.height=e>450?e+"px":"450px":i.height=cfg.invite.windowLength+"px"}"left"===cfg.invite.posSide?(t.left=n,i.left=n):(t.right=n,i.right=n),null!=cfg.invite.windowLength?(cfg.invite.windowLength=parseInt(cfg.invite.windowLength)>450?parseInt(cfg.invite.windowLength):450,cfg.invite.windowWidth=parseInt(cfg.invite.windowWidth)>300?parseInt(cfg.invite.windowWidth):300):(cfg.invite.windowLength=520,cfg.invite.windowWidth=380),i.height=cfg.invite.windowLength+"px",i.width=cfg.invite.windowWidth+"px",fn.isLightness(live800_chatSkinColor)&&(fn.addClass(fn.get("lim_mini"),"lim_mini_lightness"),fn.addClass(fn.get("lim_mini_wrap"),"lim_mini_lightness")),t.cssText+=";background: "+live800_chatSkinColor+";background: -webkit-linear-gradient(top, "+live800_chatSkinColor+" 0%, "+live800_chatSkinColor2+" 100%);background: -webkit-gradient(linear, left top, left bottom, from("+live800_chatSkinColor+"), to("+live800_chatSkinColor2+"));background: -o-linear-gradient(top, "+live800_chatSkinColor+" 0%, "+live800_chatSkinColor2+" 100%);background: linear-gradient(to bottom, "+live800_chatSkinColor+" 0%, "+live800_chatSkinColor2+" 100%);box-shadow: 0 13px 40px 0 rgba("+o.R+","+o.G+","+o.B+",.4);",fn.$tagName("head")[0].appendChild(vis.loadChatSkin()),"1"===cfg.invite.pageChatVisible?t.display="block":t.display="none",fn.addEvent(fn.get("lim_mini"),"click",function(){globalVisitHandle.openInitiatedChat(!1),clearTimeout(globalVisitHandle.delayTimer);var e=document.getElementById("live800_msg_box");e&&e.parentNode&&e.parentNode.removeChild(e)}),a(),fn.addEvent(window,"resize",a)}},50)},listen:function(){setInterval(function(){window.LIM&&LIM.completed&&("1"!=fn.getCookie("forInitial")||globalVisitClient.pageChating||globalVisitClient.initiChating||(globalVisitClient.initiChating=!0,vis.actions.push(function(){globalVisitHandle.pageChater.openPageChat(!1)})),vis.actions.length>0&&(vis.actions[0](),vis.actions.shift()))},200)},lazyCreator:function(){try{if(parent&&"1"===parent.document.body.getAttribute("lim:initchat"))return}catch(e){}d.body&&"1"===d.body.getAttribute("lim:initchat")||new JSONRequest(fn.getServerPrefix()+"/chatClient/script/component-v5.js?v=20181224","lim:component",function(){vis.loadSkin(),"undefined"!=typeof onlyShowInvite&&0!=onlyShowInvite||vis.listen()})},writeHtml:function(){var e="https:"===document.location.protocol?"https://"+live800_baseUrl+live800_baseWebApp+live800_baseChatHtmlDir+"/spacer.gif":"about:blank";if(window.LIM||(window.LIM={}),!d.getElementById("InviteWindow")){var t='<div id="InviteWindow" style="z-index:2147480000;visibility:hidden;opacity:0;display:none;filter:alpha(opacity=0);"></div>';if(t+='<div id="lim_mini_wrap" style="display:none;"><div class="lim_mini_box"></div></div>',t+='<div id="lim_mini" style="display:none;" class="chat_entry"><div id="lim_mini_icon" class="lim_mini_icon-message"><div id="lim_mini_new" class="lim_mini_badge"></div></div></div>',t+='<iframe src="'+e+'" id="lim_frame" class="spacer_frame"></iframe>',isIE6&&"undefined"==typeof live800_renderid)d.write(t);else{var i=document.createElement("div");i.innerHTML=t,document.body.appendChild(i),i=null}LIM.completed=!0,vis.loadSkin(),vis.listen(),"undefined"!=typeof globalInviteWindow?globalInviteWindow.init():(globalInviteWindow=new InviteWindow,globalInviteWindow.init()),globalVisitClient.pageChating=!1}},start:function(){vis.startflag||(vis.startflag=!0,vis.init(),"undefined"!=typeof onlyShowInvite&&0!=onlyShowInvite||(vis.monitor(),setTimeout("globalSendDriver.startFlowCapacity()",5e3)),"undefined"!=typeof mobile_icons_cfg&&browseInfo.ismobile||(globalInviteWindow=new InviteWindow),vis.isNeedLazy?vis.lazyCreator():vis.writeHtml())},initChatInIframe:function(t,i){var n,o,a=(n=navigator.userAgent.toLowerCase(),o=function(e){return e.test(n)},{isStrict:"CSS1Compat"===document.compatMode,isOpera:o(/opera/),isChrome:o(/chrome/),isWebKit:o(/webkit/),isIE6:document.all&&!!/MSIE (\d)\.0/i.exec(navigator.userAgent)&&6==/MSIE (\d)\.0/i.exec(navigator.userAgent)[1],isIE7:o(/msie 7/),isIE8:o(/msie 8/),isIE9:o(/msie 9/),isIE10:o(/msie 10/),isSecure:/^https/i.test(window.location.protocol)});function s(e){var t=/Firefox/i.test(navigator.userAgent)?'style="overflow: initial;"':"",i='<div class="lim_mini_chat_func'+("left"===cfg.invite.posSide?" chat_func-right":"")+'"><span class="lim_mini_chat-close">    <ul id="lim_mini_dropdown-menu" class="lim_mini_dropdown-menu lim_mini_slideInDown">        <li class="lim_mini_icon-mini">'+v8_wrap_min+'</li>        <li class="lim_mini_icon-mini-close">'+v8_wrap_close+'</li>    </ul></span></div><div id="chat_drag" class="chat_drag"></div><div id="chat_container" class="chat_container" '+t+'><iframe id="chat_frame" name="chat_frame" class="chat_frame" src="'+e+"&tm="+(new Date).getTime()+'" scrolling="no" border="1" allowtransparency="true" frameborder="0" ondragstart="return false" onselectstart ="return false" onselect="if(document.selection)document.selection.empty()" oncopy="document.selection.empty()" onbeforecopy="return false"></iframe></div>'+(live800_show_design?'<div class="chat_copyright"><a href="http://www.live800.com" target="_blank"></a></div>':""),n=fn.get("lim_mini_wrap");n.getElementsByTagName("div")[0].innerHTML=i;var o,s=document.getElementById("lim_mini");if(a.isIE6||(a.isIE7||a.isIE8||a.isIE9||a.isIE10)&&!a.isStrict){var r=("undefined"!=typeof window.pageYOffset?o=window.pageYOffset:a.isStrict?o=document.documentElement.scrollTop:"undefined"!=typeof document.body&&(o=document.body.scrollTop),o+(a.isStrict?document.documentElement.clientHeight:"undefined"!=typeof window.innerHeight?window.innerHeight:document.body.clientHeight));n.style.top=r-390+"px",s.style.display="block",s.style.top=r-s.offsetHeight+"px",s.style.display="none"}}!function(i){try{n=i,c=vis.initValue,"undefined"!=typeof globalInviteWindow&&globalInviteWindow.setVisiblity(!1),"init"===c&&(vis.initValue="",n.body.setAttribute("lim:initchat","1"),isMobile?(o=t,l='<div class="lim_mini_mask"></div><div id="chat_container" class="'+(a=document.querySelector('meta[name="viewport"]'),r=a?a.getAttribute("content"):"",/viewport-fit\s*=\s*cover/i.test(r)?"chat_container lim_mini_viewport_fit_cover":"chat_container")+'"><iframe id="chat_frame" name="chat_frame" class="chat_frame" src="'+o+"&tm="+(new Date).getTime()+'" scrolling="no" border="0" allowtransparency="true" frameborder="0" ondragstart="return false" onselectstart ="return false" onselect="if(document.selection)document.selection.empty()" oncopy="document.selection.empty()" onbeforecopy="return false"></iframe></div>',fn.get("lim_mini_wrap").getElementsByTagName("div")[0].innerHTML=l):s(t))}catch(e){}var n,o,a,r,l,c}(document)},frameDrag:function(){fn.dragWindow(fn.get("chat_drag"),fn.get("lim_mini_wrap"))}},cfg=loadConfig(),openOldInitiatedChatWindow=function(t){var i=t+"&chatstatus=DELAY";try{navigateToUrl(i+"&t"+(new Date).getTime(),"chatbox"+cfg.companyId,"toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=570,height=424").focus()}catch(e){i+="&block=0&t="+(new Date).getTime(),window.location=i}},openInCurrentWindow=function(e){var t=e+"&chatstatus=DELAY&block=0&t="+(new Date).getTime();window.location=t},specials={67919:openOldInitiatedChatWindow,81284:openOldInitiatedChatWindow,77081:openOldInitiatedChatWindow,68771:openOldInitiatedChatWindow,70746:openOldInitiatedChatWindow,78994:openOldInitiatedChatWindow,111375:openOldInitiatedChatWindow,131117:openOldInitiatedChatWindow};JSONRequest.prototype={init:function(e,t){this.script=document.createElement("script"),this.script.setAttribute("type","text/javascript");var i=this;if(t?(this.script.setAttribute("id",t),fn.$tagName("head")[0].appendChild(this.script)):fn.$tagName("head")[0].appendChild(this.script),this.script)if(document.all){var n=this.script;this.script.onreadystatechange=function(){var e=n.readyState;"loaded"!=e&&"interactive"!=e&&"complete"!=e||(i&&i.onload&&i.onload.call(i),i=null)}}else this.script.onload=function(){i&&i.onload&&i.onload.call(i),i=null};else i.onerror.call(this),i=null;this.script.setAttribute("src",e)},defaultError:function(){alert("create script node fail!")}},SendDriver.prototype={onRpcSuccess:function(e,t){null!=this.rpcMethod.onSuccess&&this.rpcMethod.onSuccess(e,t),this.busy=!1},onRpcError:function(){this.rpcMethod.retryTimes<=0?(null!=this.rpcMethod.onError&&this.rpcMethod.onError(this.rpcMethod),this.busy=!1):(this.rpcMethod.retryTimes--,this.execute(this.rpcMethod))},startFlowCapacity:function(){if(fn.isCookie()&&"1"!=document.body.getAttribute("lim:VisitorCapacity")){document.body.setAttribute("lim:VisitorCapacity","1");var e=fn.getCookie("VisitorCapacity");if(null==e||""==e){var t=[];t[0]="companyID="+cfg.companyId;var i=new RpcMethod("SurferServer","115",t,0,function(){fn.setSessionCookie("VisitorCapacity","1")},null);globalSendDriver.execute(i)}}},execute:function(e){this.busy=!0,this.rpcMethod=e;var t=cfg.webAppUrl+"/"+this.rpcMethod.serviceName+jsessionId+"?cmd="+this.rpcMethod.cmdNo+"&visitorIDInSession="+cfg.visitorIDInSession+cfg.visitorInfo;if(cfg.locale&&(t+="&lan="+cfg.locale),null!=this.rpcMethod.params)for(i in this.rpcMethod.params)"string"==typeof i&&"string"==typeof this.rpcMethod.params[i]&&(pos=this.rpcMethod.params[i].indexOf("="),paramName=this.rpcMethod.params[i].substring(0,pos),paramValue=this.rpcMethod.params[i].substring(pos+1),t+="&"+paramName+"="+fn.urlEncode(paramValue));t+="&rpcImageId="+(new Date).getTime();var n=this;this.rpcImage=new Image,this.rpcImage.onload=function(){n.onRpcSuccess(this.offsetWidth,this.offsetHeight)},this.rpcImage.onerror=function(){n.onRpcError()},this.rpcImage.src=t}},ReceiveDriver.prototype={initTags:function(){this.tags[1]=["0000"],this.tags[2]=["6040"],this.tags[3]=["6021"],this.tags[4]=["6020"],this.tags[5]=["6031"],this.tags[8]=["0001"],this.tags[9]=["0002"],this.tags[10]=["0003"]},getTag:function(){var t;try{if("END"==globalReceiveDriver.receiveStatus)return;vis.justUrlLen(),this.tagImage=new Image;var i=this.tagImage,n=this;if(this.loadingTag=!0,this.tagImage.onload=function(){clearTimeout(t),n.onTagSuccess(this.width)},this.tagImage.onerror=this.tagImage.onabort=function(){clearTimeout(t),n.onTagError(i)},this.firstTagSuccess){var o=this.tagUrl;"undefined"==typeof globalInviteWindow||globalInviteWindow.inviteHandled||(o+="&beInvited=1"),o+="&isblock=0",o=(o+="&act=0")+"&rpcImageId="+(new Date).getTime(),t=setTimeout("globalReceiveDriver.onTagOverTime()",5e3),this.tagImage.src=o}else this.tagImage.src=this.firstTagUrl+"&t="+(new Date).getTime()}catch(e){clearTimeout(t),globalReceiveDriver.exceptiontime++,globalReceiveDriver.exceptiontime>100?globalReceiveDriver.stop():globalReceiveDriver.restart()}},onTagOverTime:function(){this.tagImage.src="",globalReceiveDriver.restart()},onTagSuccess:function(e){var t=this.tags[e];if(null!=t){for(i in t)if("string"==typeof t[i])if("0003"!=t[i]&&(this.firstTagSuccess=!0),"0000"==t[i])this.loadContent();else if("0001"==t[i])clearInterval(globalReceiveDriver.receiveTimer),this.reConnectionToServer(),this.receiveTimer=setTimeout("globalReceiveDriver.start()",monitorInterval);else if("0002"==t[i])clearInterval(globalReceiveDriver.receiveTimer),globalReceiveDriver.start();else{this.reconnFlag=!1;var n=t[i].substring(0,3),o=t[i].substring(3),a=[];for(j in a.tp=n,a.content=o,this.receiveDriverListeners)"function"!=typeof this.receiveDriverListeners[j]&&this.receiveDriverListeners[j].receiveDriverReceived&&this.receiveDriverListeners[j].receiveDriverReceived(a)}this.loadingTag=!1}else this.firstTagSuccess=!0},reConnectionToServer:function(){if(!this.reconnFlag)if(this.reconnFlag=!0,this.reconntime>100)clearInterval(globalReceiveDriver.receiveTimer);else{this.reconntime++,this.tagImage=new Image;this.tagImage;this.tagImage.onload=function(){globalReceiveDriver.tryToRestartSurfer(this.csd,1)};var e=this.tagUrl;"undefined"==typeof globalInviteWindow||globalInviteWindow.inviteHandled||(e+="&beInvited=1"),e=(e+="&reqreconnection=1")+"&rpcImageId="+(new Date).getTime(),this.tagImage.src=e}},tryToRestartSurfer:function(e,t){this.tagImage=new Image;this.tagImage;this.tagImage.onload=function(){globalReceiveDriver.onTagSuccess(this.width)};var i=this.tagUrl;"undefined"==typeof globalInviteWindow||globalInviteWindow.inviteHandled||(i+="&beInvited=1"),i+="&csd="+e,i=(i+="&token="+t)+"&rpcImageId="+(new Date).getTime(),this.tagImage.src=i},onTagError:function(){this.firstTagSuccess=!0},sendMessage:function(e){},start:function(){if(vis.justUrlLen(),"undefined"!=typeof live800_login_status&&!live800_login_status)return!1;var e="undefined"==typeof browseInfo?"":"&mb="+browseInfo.ismobile+"&bn="+browseInfo.bname+"&bv="+encodeURIComponent(browseInfo.bversion)+"&sr="+browseInfo.width+"x"+browseInfo.height+"&os="+browseInfo.os,t=this.tagUrl,i=this;t+="&isblock=0",t+="&act=0",t+="&pagetitle="+vis.page.title,t+="&pagelocation="+vis.page.location,t+="&pagereferrer="+vis.page.referrer,t=(t+="&firstEnterUrl="+vis.page.firstenterurl)+e+"&rpcImageId="+(new Date).getTime(),this.tagImage.src=this.firstTagUrl=t,this.tagImage.onload=function(){i.onTagSuccess(this.width)},this.tagImage.onerror=this.tagImage.onabort=function(){i.onTagError()},this.reconnFlag=!1,this.receiveTimer=setInterval("globalReceiveDriver.getTag()",monitorInterval)},restart:function(){"END"!=globalReceiveDriver.receiveStatus&&(this.getTag(),clearInterval(globalReceiveDriver.receiveTimer),this.receiveTimer=setInterval("globalReceiveDriver.getTag()",monitorInterval))},stop:function(){clearInterval(this.receiveTimer),globalReceiveDriver.receiveStatus="END"},addReceiveDriverListener:function(e){null!=e&&(this.receiveDriverListeners[this.receiveDriverListeners.length]=e)}},VisitServer.prototype={refuseInvite:function(){var e=[];e[0]="companyID="+cfg.companyId,e[1]="accept=0";var t=new RpcMethod("SurferServer","102",e,0,null,null);globalSendDriver.execute(t)},acceptInvite:function(){var e=[];e[0]="companyID="+cfg.companyId,e[1]="accept=1";var t=new RpcMethod("SurferServer","102",e,0,null,null);globalSendDriver.execute(t)},initiateChat:function(){var e=[];e[0]="companyID="+cfg.companyId;var t=new RpcMethod("SurferServer","109",e,0,null,null);globalSendDriver.execute(t)},getAcceptInviteUrl:function(){var e=cfg.webAppUrl+"/SurferServer"+jsessionId+"?cmd=102";e+="&accept=1",e+="&visitorIDInSession="+cfg.visitorIDInSession,e+="&companyID="+cfg.companyId;var t=cfg.jid,i=cfg.visitorInfo;return cfg.configId&&""!=cfg.configId&&(e+="&configID="+cfg.configId),cfg.locale&&""!=cfg.locale&&(e+="&lan="+cfg.locale),(e+=cfg.enterurl?"&enterurl="+cfg.enterurl:"")+(""!=t?"&jid="+t:"")+(""!=i?"&"+i:"")},getInitiatedChatUrl:function(){var e={jid:cfg.jid,skillId:cfg.insidePageSkillId,enterurl:fn.urlDecode(cfg.enterurl)},t=cfg.webAppUrl+"/chatClient/chatbox.jsp"+jsessionId+"?companyID="+cfg.companyId+"&chatType=2";cfg.configId&&(t+="&configID="+cfg.configId),cfg.locale&&(t+="&lan="+cfg.locale);"undefined"!=typeof operator&&operator.id,"undefined"!=typeof skill&&skill.id;return t+"&"+fn.paramsToUrl(e)+(""!=cfg.visitorInfo?"&"+cfg.visitorInfo:"")+(isSSLReq?"&s=1":"")},getCallUrl:function(){var e=cfg.jid,t=vis.getParam(),i=cfg.visitorInfo,n=(cfg.enterurl,cfg.webAppUrl+"/chatClient/chatbox.jsp"+jsessionId+"?companyID="+cfg.companyId+(""!=e?"&jid="+e:"")+(""!=t?"&"+t:"")+(i?"&"+i:""));return cfg.configId&&(n+="&configID="+cfg.configId),n+(cfg.enterurl?"&enterurl="+cfg.enterurl:"")},start:function(){},stop:function(){clearTimeout(this.visitServerTimer)}},VisitClient.prototype={receiveDriverReceived:function(e){var t=e,i=t.tp;if(null!=i)switch(i){case"602":if("1"==t.content)for(j in this.messageListeners)this.messageListeners[j].showInvite&&this.messageListeners[j].showInvite();else for(j in this.messageListeners)this.messageListeners[j].hideInvite&&this.messageListeners[j].hideInvite();break;case"603":for(j in this.messageListeners)this.messageListeners[j].openInitiatedChat&&this.messageListeners[j].openInitiatedChat(!0);break;case"604":for(j in this.messageListeners)this.messageListeners[j].reloadIcon&&this.messageListeners[j].reloadIcon();break;case"608":for(j in this.messageListeners)this.messageListeners[j].setConfig&&this.messageListeners[j].setConfig(t)}},refuseInvite:function(){globalVisitServer.refuseInvite()},acceptInvite:function(){globalVisitServer.acceptInvite()},initiatedChat:function(){globalVisitServer.initiatedChat()},getAcceptInviteUrl:function(){return globalVisitServer.getAcceptInviteUrl()},getInitiatedChatUrl:function(){return globalVisitServer.getInitiatedChatUrl()},getCallUrl:function(){return globalVisitServer.getCallUrl()},start:function(){globalReceiveDriver.start(),globalVisitServer.start()},stop:function(){globalReceiveDriver.stop(),globalVisitServer.stop()},addMessageListener:function(e){null!=e&&(this.messageListeners[this.messageListeners.length]=e)}},VisitHandle.prototype={showInvite:function(){vis.actions.push(function(){"undefined"!=typeof globalInviteWindow&&(globalInviteWindow.operatorInvite=!1,window.focus(),globalInviteWindow.isauto=!1,globalInviteWindow.inviteHandled=!1,globalInviteWindow.operatorInvite=!0,globalInviteWindow.show())})},hideInvite:function(){"undefined"!=typeof globalInviteWindow&&globalInviteWindow.hide()},openInitiatedChat:function(e){var t=!1!==e;t&&(globalVisitClient.initiChating=!0,fn.setCookie("forInitial","1",2));var i=this;vis.actions.push(function(){i.initiatedChatAction(t)})},initiatedChatAction:function(e){this.pageChater.openPageChat(e)},getInviteStyle:function(){var e=parseInt(cfg.invite.live800_invite_style);return isNaN(e)?cfg.invite.live800_invite_style:e>18?(cfg.invite.live800_invite_style="0","0"):cfg.invite.live800_invite_style},reloadIcon:function(){var e=d.getElementsByName("live800icon");if(null!=e)for(i=0;i<e.length;i++)temp=e[i].src,temp+="&rpcImageId="+(new Date).getTime(),e[i].src=temp},onInviteWindowAccept:function(t){globalInviteWindow.inviteHandled=!0;var i=globalVisitClient.getAcceptInviteUrl(),n=globalWindowAttribute;if(isOpenNewTab&&t&&t.nodeName&&1==t.nodeType)return t.setAttribute("href",i),!0;try{navigateToUrl(i,"chatbox"+cfg.companyId,n).focus()}catch(e){}return!1},onInviteWindowRefuse:function(){globalInviteWindow.inviteHandled=!0,globalVisitClient.refuseInvite()},onIconClick:function(){var t=globalVisitClient.getCallUrl(),i=globalWindowAttribute;"undefined"!=typeof this.chatWindow&&null!=this.chatWindow||(this.chatWindow=navigateToUrl(t,"chatbox"+cfg.companyId,i));try{this.chatWindow.focus(),this.chatWindow.opener=window}catch(e){this.chatWindow=navigateToUrl(t,"chatbox"+cfg.companyId,i)}return!1},autoInitialChat:function(){if(cfg.autoInitialChat&&"1"==cfg.autoInitialChat.autoChat&&("undefined"==typeof autoChat||1!=autoChat)){var e=this;this.delayTimer=setTimeout(function(){var t,i=fn.getCookie("autoChatCount");if(t=null!=i?parseInt(i):0,isMobile)e.pageChater.start(!1,"4");else if(0==cfg.autoInitialChat.chatMethod){null==fn.getCookie("hasAutoChat")&&(fn.setCookie("hasAutoChat",!0,60*cfg.autoInitialChat.chatFailuretime),e.pageChater.start(!1,"4"))}else if(0!=cfg.autoInitialChat.chatType||isMobile)1==cfg.autoInitialChat.chatType&&(e.pageChater.autoChatCountForPage=1,e.pageChater.start(!1,"4"));else{if(t>=parseInt(cfg.autoInitialChat.chatInviteAmount))return;t++,fn.setCookie("autoChatCount",t,60*cfg.autoInitialChat.chatFailuretime),e.pageChater.start(!1,"4")}},1e3*cfg.autoInitialChat.delayTime)}},initListener:function(){globalVisitClient.addMessageListener(this)}},InviteWindow.prototype={init:function(){d.body?this.floatLeft=(d.body.clientWidth-250)/2:this.floatLeft=(innerWidth-450)/2,this.loaded=!0,this.parent=null,this.isLock=cfg.invite.live800_invite_fixed_pos,this.canFixed=!(isIE6||"ie"===browseInfo.bname&&"BackCompat"===document.compatMode);var e=this;if(setTimeout(function(){e.generate()},500),(1==cfg.invite.live800_invite_auto||2==cfg.invite.live800_invite_auto)&&"1"==cfg.status){var t=fn.getCookie("hasVisited");if("1"==cfg.invite.live800_invite_repeat_type&&(globalInviteWindow.inviteCount=parseInt(fn.getCookie("visitorInviteCount"))||0),globalInviteWindow.inviteCount>=parseInt(cfg.invite.live800_invite_repeat_number)-1)return!1;1==cfg.invite.live800_invite_auto?setTimeout("globalInviteWindow.show()",1e3*cfg.invite.live800_invite_delay):t||setTimeout("globalInviteWindow.show()",1e3*cfg.invite.live800_invite_delay),this.isauto=!0}function i(){if(!globalInviteWindow.inviteHandled){var e=cfg.webAppUrl+"/SurferServer"+jsessionId+"?cmd=102&companyID="+cfg.companyId+"&accept=0&visitorIDInSession="+cfg.visitorIDInSession+cfg.visitorInfo+"&rpcImageId="+(new Date).getTime();cfg.locale&&(e+="&lan="+cfg.locale),(new Image).src=e,globalInviteWindow.inviteHandled=!0}}fn.addEvent(window,"unload",i),fn.addEvent(window,"beforeunload",i)},generate:function(){var e=cfg.invite.live800_invite_top,t={inviteTitle:fn.unescapeHTML(fn.urlDecode(cfg.invite.live800_invite_title)),inviteText:this.getInviteContent(),inviteWelcome:cfg.visitorAddr,inviteWord:cfg.inviteContent,accept:cfg.accept,cancel:cfg.cancel};if("0"==cfg.invite.live800_welcome_switch&&(t.inviteWelcome=""),"default"!=cfg.invite.live800_invite_style){if(this.inviteInnerHtml=Theme.generatorDefault(t),1==e){var i=cfg.invite.live800_invite_style?cfg.invite.live800_invite_style:0;return t.swfUrl=fn.getServerPrefix()+"/chatClient/invite/theme/"+i+"/images/invite.swf",this.inviteInnerHtml=Theme.generatorFlash(t),void(fn.get("InviteWindow").innerHTML=this.inviteInnerHtml)}if(2==e){var n=fn.urlToParams(cfg.customContent);return t.type=n.interface_type,this.inviteInnerHtml=Theme.generatorCustom(t,n),fn.get("InviteWindow").innerHTML=this.inviteInnerHtml,n.height&&(fn.get("InviteWindow").style.height=n.height+"px"),void(n.width&&(fn.get("InviteWindow").style.width=n.width+"px"))}fn.get("InviteWindow").innerHTML=Theme.generatorDefault(t)}else Theme.processDefaultValue(t)},showTimer:function(){try{var config=cfg,top,left;if(this.loaded&&this.showInvite)document.all?(scrollPosY=0,scrollPosX=0,eval('try {if (typeof(document.documentElement) != "undefined") {scrollPosY = document.documentElement.scrollTop;scrollPosX = document.documentElement.scrollLeft;}} catch (e) {}'),scrollPosY=Math.max(d.body.scrollTop,scrollPosY),scrollPosX=Math.max(d.body.scrollLeft,scrollPosX),top=scrollPosY,left=scrollPosX,this.lastTop<0||this.lastTop==top&&this.lastLeft==left?this.setVisiblity(!0):this.setVisiblity(!1)):(scrollPosY=0,scrollPosX=0,eval('try {if (typeof(document.documentElement) != "undefined") {scrollPosY = document.documentElement.scrollTop;scrollPosX = document.documentElement.scrollLeft;}} catch (e) {}'),scrollPosY=Math.max(d.body.scrollTop,scrollPosY),scrollPosX=Math.max(d.body.scrollLeft,scrollPosX),top=pageYOffset,left=pageXOffset,this.lastTop<0||this.lastTop==top&&this.lastLeft==left?this.setVisiblity(!0):this.setVisiblity(!1)),this.lastTop=top,this.lastLeft=left;globalInviteWindow.floattimer=setTimeout("globalInviteWindow.showTimer()",250)}catch(e){globalInviteWindow.floattimer=setTimeout("globalInviteWindow.showTimer()",250)}},scrollPlace:function(){var e,t;e=this.floatTop,t=d.body?d.body.clientWidth>d.documentElement.clientWidth?d.body.clientWidth:d.documentElement.clientWidth-250-this.floatLeft:innerWidth-250-this.floatLeft;var i=fn.get("InviteWindow").style;i.left=pageXOffset+t+"px",i.top=pageYOffset+e+"px"},show:function(){"undefined"!=typeof globalVisitClient&&globalVisitClient.pageChating||"true"==fn.getCookie("hasVisited")&&2==cfg.invite.live800_invite_auto&&this.isauto||(2==cfg.invite.live800_invite_auto&&fn.setCookie("hasVisited","true",60*cfg.invite.live800_invite_expired_time),this.showInvite=!0,fn.get("InviteWindow").style.display="block","1"==this.isLock&&this.canFixed?(fn.get("InviteWindow").style.position="fixed",this.resizeInvite(!0),fn.addEvent(window,"resize",function(){globalInviteWindow.floattimer&&globalInviteWindow.resizeInvite(!0)})):(globalInviteWindow.showTimer(),this.resizeInvite(!1)),globalInviteWindow.setVisiblity(!0),fn.dragWindow(fn.get("InviteWindow"),fn.get("InviteWindow"),globalInviteWindow),"293098"!=cfg.companyId&&"11150"!=cfg.companyId||top.focus(),function(){var e=function(e){for(var t,i,n=e.rules,o=0;o<n.length;o++)(t=n[o]).selectorText&&void 0!==(i=t.style.filter)&&(t.style.filter=i.replace("http://test.live800.com/test1","http://"+cfg.baseWebApp),t.style.filter)};if(function(e){if(e.indexOf("MSIE")>0){var t=e.match(/msie([^;]+);/i);if(parseFloat(t[1])<=6)return!0}return!1}(navigator.userAgent))for(var t=document.styleSheets,i=0;i<t.length;i++)if("invite_style"==t[i].id){e(t[i]);break}}())},hide:function(e){window.toChat||(window.toChat=e||!1),this.showInvite=!1,this.setVisiblity(!1),this.isauto||globalVisitHandle.onInviteWindowRefuse(),window.toChat||"1"!=cfg.invite.live800_invite_repeat||"1"!=cfg.invite.live800_invite_auto||(globalInviteWindow.inviteCount=globalInviteWindow.inviteCount||0,"1"==cfg.invite.live800_invite_repeat_type&&(globalInviteWindow.inviteCount=parseInt(fn.getCookie("visitorInviteCount"))||0),globalInviteWindow.inviteCount<parseInt(cfg.invite.live800_invite_repeat_number)-1&&setTimeout(function(){globalInviteWindow.inviteCount++,"1"==cfg.invite.live800_invite_repeat_type&&fn.setCookie("visitorInviteCount",globalInviteWindow.inviteCount,60*cfg.invite.live800_invite_expired_time),globalInviteWindow.show()},1e3*cfg.invite.live800_invite_repeat_time))},accept:function(e){return this.showInvite=!1,globalInviteWindow.setVisiblity(!1),this.isauto?vis.opendChat(e):globalVisitHandle.onInviteWindowAccept(e)},refuse:function(){this.hide()},setInviteText:function(e){fn.get("invitetext").innerHTML=e},setConfig:function(e){this.inviteText=e.invitecontent,this.setInviteText(this.inviteText)},getInviteContent:function(){var e="";if("0"==cfg.invite.live800_welcome_switch)return"<p>"+fn.unescapeHTML(cfg.inviteContent)+"</p>";var t=cfg.visitorAddr;return t?(t&&"null"!=t&&0!=t.length&&(e=e+fn.urlDecode(fn.unescapeHTML(t))+"<p>"+fn.unescapeHTML(cfg.inviteContent)+"</p>"),e):e},resizeInvite:function(e){var t,i="CSS1Compat"==d.compatMode,n={},o=fn.get("InviteWindow");i?(t=d.documentElement,n.scrollTop=Math.max(d.body.scrollTop,t.scrollTop),n.scrollLeft=Math.max(d.body.scrollLeft,t.scrollLeft)):(t=d.body,n.scrollTop=t.scrollTop,n.scrollLeft=t.scrollLeft),e&&(n.scrollTop=0,n.scrollLeft=0),o.style.top=n.scrollTop+((t.clientHeight||window.innerHeight)-o.offsetHeight)/2+"px",o.style.left=n.scrollLeft+((t.clientWidth||window.innerWidth)-o.offsetWidth)/2+"px"},setVisiblity:function(e){var t=fn.get("InviteWindow"),i=t?t.style:null,n=e?"visible":"hidden",o=e?1:0;i&&(i.visibility=n,i.opacity&&(i.opacity=o),i.filter="alpha(opacity="+100*o+")")}};var Theme={generatorDefault:function(e){return'<div id="invite_bg"></div><div id="invite_title">'+fn.unescapeHTML(fn.urlDecode(e.inviteTitle))+'</div><div id="invite_text">'+e.inviteText+"</div><div id=\"invite_btn\"><a target='_blank' href='javascript:void(0);' style='text-decoration:none'  onclick=\"return globalInviteWindow.accept(this);\"><button class=\"accept\" ><span>"+fn.urlDecode(e.accept)+"</span></button></a><a href='javascript:void(0);' style='text-decoration:none'><button class=\"cancel\" onclick=\"globalInviteWindow.refuse();return false;\"><span>"+fn.urlDecode(e.cancel)+"</span></button></a></div>"},generatorFlash:function(e){var t=fn.unescapeHTML(fn.urlDecode(e.inviteWelcome)),i="title="+fn.unescapeHTML(fn.urlDecode(e.inviteTitle))+"&content="+fn.unescapeHTML(fn.urlDecode(e.inviteWord))+"&welcome="+(void 0===t?"":t)+"&accept="+fn.unescapeHTML(fn.urlDecode(e.accept))+"&cancel="+fn.unescapeHTML(fn.urlDecode(e.cancel)),n="https:"==document.location.protocol?"https://":"http://";return/opaque=1/i.test(e.swfUrl)?'<object id="inviteFlash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+n+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%"><param name="movie" value="'+e.swfUrl+'" /><param name="quality" value="high" /><param name="FlashVars" value="'+fn.escapeHTML(i)+'" /><param name="allowScriptAccess" value="always" /><embed src="'+e.swfUrl+'" quality="high" width="100%" height="100%" name="movie" allowScriptAccess="always" FlashVars="'+i+'" type="application/x-shockwave-flash" pluginspage="'+n+'www.adobe.com/go/getflashplayer" /></object>':'<object id="inviteFlash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+n+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%"><param name="movie" value="'+e.swfUrl+'" /><param name="quality" value="high" /><param name="FlashVars" value="'+fn.escapeHTML(i)+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><embed src="'+e.swfUrl+'" quality="high" width="100%" height="100%" wmode="transparent" name="movie" allowScriptAccess="always" FlashVars="'+i+'" type="application/x-shockwave-flash" pluginspage="'+n+'www.adobe.com/go/getflashplayer" /></object>'},generatorCustom:function(e,t){return 0==e.type?(e.background=t.background,e.buttonBackground=t.buttonBackground,e.link=t.link,Theme.getSimpleHtml(e)):2==e.type?(e.swfUrl=t.swfUrl,e.height=t.height,e.width=t.width,Theme.generatorFlash(e)):Theme.generatorDefault(e)},getSimpleHtml:function(e){var t="",i="https:"==document.location.protocol?"https://":"http://";return-1!=e.background.indexOf(".swf")?(t='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+i+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%" id="inviteFlash"><param name="movie" value="'+e.background+'"/><param name="quality" value="high"/><param name="wmode" value="transparent"/><embed id="inviteFlash" src="'+e.background+'" quality="high" width="100%" height="100%" type="application/x-shockwave-flash" wmode="transparent" pluginspage="'+i+'www.adobe.com/go/getflashplayer" /></object><div id="invite_title">'+fn.urlDecode(e.inviteTitle)+'</div><div id="invite_text">'+fn.urlDecode(fn.unescapeHTML(e.inviteWelcome))+"<p>"+fn.unescapeHTML(fn.urlDecode(e.inviteWord))+"</p></div><div id=\"invite_btn\"><a target='_blank'  href='javascript:void(0);' style='text-decoration:none'  onclick=\"return globalInviteWindow.accept(this);\"><button class=\"accept\"><span>"+fn.urlDecode(e.accept)+"</span></button></a><a href='javascript:void(0);' style='text-decoration:none'><button class=\"cancel\" onclick=\"globalInviteWindow.refuse();\"><span>"+fn.urlDecode(e.cancel)+"</span></button></a></div>",t+='<style type="text/css">#invite_btn button{background-image:url('+e.buttonBackground+");background:url("+e.buttonBackground+") no-repeat !important}}</style>"):(t='<div id="invite_bg"></div><div id="invite_title">'+fn.urlDecode(e.inviteTitle)+'</div><div id="invite_text">'+fn.urlDecode(e.inviteWelcome)+"<p>"+fn.urlDecode(fn.unescapeHTML(e.inviteWord))+"</p></div><div id=\"invite_btn\"><a target='_blank'  href='javascript:void(0);' style='text-decoration:none'  onclick=\"return globalInviteWindow.accept(this);\"><button class=\"accpet\" ><span>"+fn.urlDecode(e.accept)+"</span></button></a><a href='javascript:void(0);' style='text-decoration:none'><button class=\"cancel\" onclick=\"globalInviteWindow.refuse();return false;\"><span>"+fn.urlDecode(e.cancel)+"</span></button></a></div>",t+='<style type="text/css">#InviteWindow{background-image:url('+e.background+");}#invite_btn button{background-image:url("+e.buttonBackground+");background:url("+e.buttonBackground+") no-repeat !important}}</style>"),e.link&&0!=e.link.length&&(t+="<link type='text/css' href='"+e.link+"' rel='stylesheet'/>"),t},processDefaultValue:function(e){e.background=fn.getServerPrefix()+"/chatClient/invite/theme/live800/images/invite.swf",e.link=fn.getServerPrefix()+"/chatClient/invite/theme/live800/invite.css"+(isSSLReq?"?ss=1":""),e.buttonBackground=fn.getServerPrefix()+"/chatClient/invite/theme/live800/images/invite_bt.gif",fn.get("InviteWindow").innerHTML=Theme.getSimpleHtml(e)}};MobileIcon.prototype={init:function(){var e=fn.urlToParams(mobile_icons_cfg);this.icon_isOpen=fn.urlDecode(e.icon_isOpen),this.color=fn.urlDecode(e.icon_color),this.chat_words=fn.urlDecode(e.icon_chat_words),this.tel_open=fn.urlDecode(e.icon_tel_open),this.tel_words=fn.urlDecode(e.icon_tel_words),this.tel_number=fn.urlDecode(e.tel_number),this.icon_position=fn.urlDecode(e.icon_position),this.chatMode=fn.urlDecode(e.icon_chat_mode),this.chat_offwords=fn.urlDecode(e.icon_off_line_words),this.msgTipHideTime=e.msgTipHideTime||5,this.company_status=live800_status,this.vWith=50,this.vHeight=200,this.hWith=50,this.hHeight=200,this.devicePixelRatio=window.devicePixelRatio,this.zoomTimer,this.zoomMult,this.scrollTop=0,this.leavewordEnable="undefined"==typeof leavewordEnable?"0":leavewordEnable,"1"==this.icon_isOpen&&browseInfo.ismobile||(this.isDisplay=!1)},showMobileIco:function(){this.tel_words&&0==this.tel_words.indexOf("{zh")&&(this.tel_words="Call"),this.chat_words&&0==this.chat_words.indexOf("{zh")&&(this.chat_words="Livechat"),"b"!=this.icon_position&&(this.tel_words=this.replaceDirec(this.tel_words),this.chat_words=this.replaceDirec(this.chat_words),this.chat_offwords=this.replaceDirec(this.chat_offwords));var e,t="0"==this.company_status?this.chat_offwords:this.chat_words,i="",n="lim_m_"+this.icon_position;i='<div id="lim_mchat_wrapper">',"1"==this.tel_open&&(n+=" lim_m_sgl ",i+='<a id="lim_tel_icon" target="_blank" href="tel:'+this.tel_number+'" style="background-color:'+this.color+';"><em></em><span>'+this.tel_words+"</span></a>"),("1"==this.company_status||"2"==this.company_status||"0"==this.company_status&&"0"==this.leavewordEnable)&&(i+='<a id="lim_mob_chat" target="_blank" onclick="globalMobileIcon.openMobileInnerChat();" style="background-color:'+this.color+';"><em></em><span>'+t+'</span><div id="lim_chat_tip"><div id="lim_tip_words">0</div></div></a>'),i+="</div>",(e=fn.createNode("div",{id:"lim_mobile_chat",style:"visibility:hidden"},n)).innerHTML=i,document.body.appendChild(e);var o,a=this,s={},r=fn.get("lim_mobile_chat");o=setInterval(function(){r.getComputedStyle?(s.borderBottomStyle=r.currentStyle.borderBottomStyle,s.opacity=r.currentStyle.opacity):(s.borderBottomStyle=window.getComputedStyle(r,null).borderBottomStyle,s.opacity=window.getComputedStyle(r,null).opacity),"dashed"==s.borderBottomStyle&&(a.zoomUI(),clearInterval(o))},50),fn.addEvent(window,"orientationchange",a.zoomUI),fn.addEvent(window,"resize",a.zoomUI),fn.addEvent(window,"scroll",a.zoomUI),fn.addEvent(window,"touchmove",a.zoomUI),fn.addEvent(window,"MSPointerMove",a.zoomUI),this.tipBox=fn.get("lim_chat_tip"),this.tipWord=fn.get("lim_tip_words"),this.chatAnchor=fn.get("lim_mob_chat")},generate:function(){this.loadMSkin(),this.isDisplay&&this.showMobileIco()},openMobileInnerChat:function(){isMobile&&"2"==globalVisitHandle.pageChater.getChatOpenMode()&&(this.scrollTop=document.documentElement.scrollTop||document.body.scrollTop),globalVisitHandle.pageChater.openPageChat(!1),clearTimeout(globalVisitHandle.delayTimer)},messageTip:function(e){this.tipBox.style.display="block",this.tipWord.innerHTML=e},messageTipBox:function(e,t,i){if(!e||!t)return!1;var n='<div id="lim_mini_head"><div><i></i>'+t+"</div><span id=\"lim_mini_close\"></span></div><div class='lim_mini_message'>"+e+"</div><div class='lim_mini_reply'>"+i+"</div>";if(fn.get("lim_mini_read_box"))fn.get("lim_mini_read_box").innerHTML=n;else{var o=document.createElement("div");o.id="lim_mini_read_box",o.innerHTML=n,document.body.appendChild(o),o.onclick=function(e){var t=e.target||e.srcElement;document.body.removeChild(o),"lim_mini_close"==t.id?(globalVisitHandle.pageChater.clearMobileMessTip(),globalVisitHandle.pageChater.pageMessager.send("{cmd:'MC06',data:'close'}")):globalMobileIcon.openMobileInnerChat()}}setTimeout(function(){fn.get("lim_mini_read_box").className="lim_mini_read_box_show"},0),clearTimeout(this.messageTipTimer),this.messageTipTimer=setTimeout(function(){fn.get("lim_mini_read_box")&&document.body.removeChild(fn.get("lim_mini_read_box"))},1e3*this.msgTipHideTime)},zoomUI:function(){globalMobileIcon=globalMobileIcon||new MobileIcon;var e=globalMobileIcon,t=fn.get("lim_mobile_chat"),i=fn.get("lim_mchat_wrapper");e.zoomMult=1,e.zoomTimer=setTimeout(function(){clearTimeout(e.zoomTimer);if(t.style.cssText="border-bottom-style:none;","b"===e.icon_position)i.offsetWidth,e.zoomMult;if("lm"===e.icon_position||"rm"===e.icon_position)t.offsetHeight,e.zoomMult;i.style.position="relative",t.style.visibility="visible"},300)},loadMSkin:function(e){var t=fn.$tagName("head")[0],i={id:"lim_m_style",type:"text/css",rel:"stylesheet",href:fn.getServerPrefix()+"/chatClient/style/mobile.css?v=20181228"},n=fn.createNode("link",i);t.appendChild(n)},replaceDirec:function(e){for(var t=fn.unescapeHTML(e).split(""),i="",n=0;n<t.length;n++)t[n]&&(i+=t[n]+"<br/>");return i},zoomLevel:function(){return(1/function(){var e=window.document.documentElement.clientWidth,t=e/window.document.documentElement.clientHeight>1.2,i=window.screen.width,n=window.screen.height;t&&i<n&&(i=window.screen.height,n=window.screen.width);var o,a,s,r=window.innerWidth,l=e/i;window.devicePixelRatio&&(a=window.navigator.userAgent.toLowerCase()||"",s=window.navigator.vendor&&window.navigator.vendor.toLowerCase()||"",/[google inc.|ucweb]/.test(s)&&(!/chrome/.test(a)||/samsung/.test(a)))&&i>640?l*=window.devicePixelRatio:(o=window.navigator.userAgent.toLowerCase()||"",/(iemobile|windows phone)/.test(o)&&(l*=1.5));var c=e/r/l;return c=(c/=1.2).toFixed(2)}()).toFixed(2)}},PageChater.prototype={start:function(e,t){this.chatDiv=fn.get("lim_mini_wrap"),this.chatsty=this.chatDiv.style,this.effectsEl=fn.get("lim_mini_new");var i=this;if(this.pageMessager.listen(),!this.client.pageChating){var n=this.client.getInitiatedChatUrl(),o=cfg.companyId;if(n=e?n.replace(/&skillId=[\d]+/g,""):"4"==t?n.replace("&chatType=2","&chatType=4"):n.replace("&chatType=2",""),specials[o])return specials[o].apply(window,[n]),void(this.invite&&this.invite.hide());if(!this.client.pageChating){if(vis.initValue="init","3"==this.getChatOpenMode()&&isMobile)return this.icon.chatAnchor.href=n+"&t="+(new Date).getTime(),!0;n+="&inw=1",vis.initChatInIframe(n+"&inviteStyle="+this.handle.getInviteStyle()+"&block=1",this.handle.getInviteStyle()),isMobile?fn.$class("lim_mini_mask",this.chatDiv)[0].onclick=function(){i.hidePageChat()}:(vis.frameDrag(),fn.$class("lim_mini_icon-mini-close",this.chatDiv)[0].onclick=function(){"success"===i.pageMessager.status?i.pageMessager.send("{cmd:'CP01'}"):(i.closePageChat(),i.autoChatControl())},fn.$class("lim_mini_icon-mini",this.chatDiv)[0].onclick=function(){i.hidePageChat()}),this.client.pageChating=!0,fn.get("lim_mini")&&(fn.get("lim_mini").style.display="block"),"undefined"!=typeof autoChat&&1==autoChat?(isMobile||"show"!=fn.getCookie("live800_page_state")||this.showPageChat(),autoChat=0):isMobile&&cfg.autoInitialChat&&"1"==cfg.autoInitialChat.autoChat&&"4"==t||this.showPageChat(),isMobile||this.pageStateSync(),this.invite&&this.invite.hide()}}},unreadMessTip:function(e,t,i){this.pageDisplayState||(this.unreadMessNum++,this.icon&&("1"==this.icon.icon_isOpen&&this.icon.messageTip(this.unreadMessNum),this.icon.messageTipBox(e,t,i)))},clearMobileMessTip:function(){this.unreadMessNum=0,"1"==this.icon.icon_isOpen&&(globalMobileIcon.tipBox.style.display="none")},autoChatControl:function(){if(cfg.autoInitialChat&&"1"==cfg.autoInitialChat.autoChat&&!isMobile){var e=this;if(0==cfg.autoInitialChat.chatMethod)return clearTimeout(e.autoChatTimer),void(e.autoChatTimer=setTimeout(function(){fn.getCookie("hasAutoChat")||(fn.setCookie("hasAutoChat",!0,60*cfg.autoInitialChat.chatFailuretime),e.start(!1,"4"))},1e3*cfg.autoInitialChat.chatIntervalsTime));1==cfg.autoInitialChat.chatMethod&&1==cfg.autoInitialChat.chatType?(clearTimeout(e.autoChatTimer),e.autoChatTimer=setTimeout(function(){e.autoChatCountForPage>=parseInt(cfg.autoInitialChat.chatInviteAmount)||(e.autoChatCountForPage++,e.start(!1,"4"))},1e3*cfg.autoInitialChat.chatIntervalsTime)):1==cfg.autoInitialChat.chatMethod&&0==cfg.autoInitialChat.chatType&&(clearTimeout(e.autoChatTimer),e.autoChatTimer=setTimeout(function(){var t=fn.getCookie("autoChatCount");autoChatCount=null==t?0:parseInt(t),autoChatCount>=parseInt(cfg.autoInitialChat.chatInviteAmount)||(autoChatCount++,fn.setCookie("autoChatCount",autoChatCount,60*cfg.autoInitialChat.chatFailuretime),e.start(!1,"4"))},1e3*cfg.autoInitialChat.chatIntervalsTime))}},openPageChat:function(e){this.client.pageChating?this.showPageChat():(this.start(e),isMobile&&this.pageMessager.send("{cmd:'MC03'}"))},getChatOpenMode:function(){var e="3",t=fn.$tagName("meta"),i=this.icon.chatMode;for(var n in t)if(t[n].name&&"viewport"==t[n].name.toLowerCase()&&t[n].content){e="2";break}return"3"==i?e="3":"2"==i&&(e="2"),e},clearMsgTipBadge:function(){this.unreadMessNum=0,this.effectsEl.style.display="none",this.effectsEl.setAttribute("data-num","0"),this.effectsEl.innerText="0"},hidePageChat:function(){if(isMobile){var e=this;fn.removeClass(document.body,"lim_chat_full_body"),fn.removeClass(document.documentElement,"lim_chat_full_html"),document.documentElement.scrollTop=this.icon.scrollTop,document.body.scrollTop=this.icon.scrollTop,"1"==this.icon.icon_isOpen&&setTimeout(function(){e.icon.zoomUI()},1),this.pageMessager.send("{cmd:'MC06',data:'hide'}")}else{var t=this;this.clearMsgTipBadge(),this.chatsty.visibility="hidden",this.chatsty.zIndex="-1",fn.get("lim_mini").style.display="",fn.addClass(this.chatDiv,"lim_mini_slideOutDown"),setTimeout(function(){fn.removeClass(t.chatDiv,"lim_mini_slideOutDown")},1e3),this.pageMessager.send("{cmd:'CP02',data:'hide'}")}this.pageDisplayState=!1,this.client.pageChating&&fn.setCookie("live800_page_state","hide")},closePageChatForNotHidden:function(e){if(isMobile){fn.removeClass(document.body,"lim_chat_full_body"),fn.removeClass(document.documentElement,"lim_chat_full_html"),document.documentElement.scrollTop=this.icon.scrollTop,document.body.scrollTop=this.icon.scrollTop}else{var t=fn.get("chat_frame").src+"#x=1&inw=1";fn.get("chat_frame").src=t,this.chatsty.display="none",fn.get("lim_mini").style.display="",this.clearMsgTipBadge(),globalVisitClient.pageChating=!1}},showPageChat:function(){if(isMobile)this.clearMobileMessTip(),fn.get("lim_mini_read_box")&&document.body.removeChild(fn.get("lim_mini_read_box")),this.chatsty.display="",this.chatsty.visibility="",this.chatsty.zIndex="2147480000",fn.addClass(document.body,"lim_chat_full_body"),fn.addClass(document.documentElement,"lim_chat_full_html"),this.pageMessager.send("{cmd:'MC05'}"),this.pageMessager.send("{cmd:'MC06',data:'show'}");else{var e=this;fn.get("lim_mini").style.display="none",this.pageDisplayState||(fn.addClass(this.chatDiv,"lim_mini_slideInUp"),setTimeout(function(){fn.removeClass(e.chatDiv,"lim_mini_slideInUp")},1e3)),this.chatsty.display="",this.chatsty.visibility="",this.chatsty.zIndex="2147480000",this.clearMsgTipBadge(),this.pageMessager.send("{cmd:'CP02',data:'show'}")}this.pageDisplayState=!0,this.client.pageChating&&fn.setCookie("live800_page_state","show")},maxChatWindow:function(){this.chatsty.display="none";var t=this.client.getInitiatedChatUrl()+"&tm="+(new Date).getTime(),i=(vis.chatWindow,globalWindowAttribute);isSSLReq&&(t+="&ss=1"),t=t.replace("&chatType=2","");try{"undefined"!=typeof vis.chatWindow&&null!=vis.chatWindow||(vis.chatWindow=window.open(t,"chatbox"+cfg.companyId+("undefined"!=typeof live800_chatVersion&&5==live800_chatVersion?(new Date).getTime():""),i));try{vis.chatWindow.focus(),vis.chatWindow.opener=window}catch(e){vis.chatWindow=navigateToUrl(t,"chatbox"+cfg.companyId,i)}}catch(e){}var n=this;return setTimeout(function(){n.closePageChat()},1e4),!1},closePageChat:function(){this.pageMessager.status="wait",globalVisitClient.pageChating=!1,globalVisitClient.initiChating=!1,this.hidePageChat()},showMessageTip:function(){if(!this.pageDisplayState){this.effectsEl.style.display="block";var e=parseInt(this.effectsEl.getAttribute("data-num")||0)+1;this.effectsEl.setAttribute("data-num",e),this.effectsEl.innerText=e,e=null}},pageStateSync:function(){clearTimeout(this.pageStateSyncTimer);var e=this;!function t(){if(e.client.pageChating){var i=fn.getCookie("live800_page_state");"show"!=i||e.pageDisplayState||e.showPageChat(),"hide"==i&&e.pageDisplayState&&e.hidePageChat()}e.pageStateSyncTimer=setTimeout(t,100)}()}},window.openFlashWin=function(){globalInviteWindow.isauto?vis.opendChat():globalVisitHandle.onInviteWindowAccept(),globalInviteWindow.showInvite=!1,globalInviteWindow.setVisiblity(!1)};var Messenger=function(){var e="[PROJECT_NAME]",t="postMessage"in window;function i(e,t,i){var n="";if(arguments.length<2?n="target error - target and name are both required":"object"!=typeof e?n="target error - target itself must be window object":"string"!=typeof t&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=e,this.name=t,this.prefix=i}function n(t,i){this.targets={},this.name=t,this.listenFunc=[],this.prefix=i||e,this.initListen()}return i.prototype.send=t?function(e){this.target.postMessage(this.prefix+"|"+this.name+"__Messenger__"+e,"*")}:function(e){var t=window.navigator[this.prefix+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(this.prefix+e,window)},n.prototype.addTarget=function(e,t){var n=new i(e,t,this.prefix);this.targets[t]=n},n.prototype.initListen=function(){var e=this,i=function(t){if(t&&"string"==typeof t.data)for(var i=(t=t.data).split("__Messenger__"),n=(t=i[1],i[0].split("|")),o=n[0],a=n[1],s=0;s<e.listenFunc.length;s++)o+a===e.prefix+e.name&&e.listenFunc[s](t)};t?"addEventListener"in document?window.addEventListener("message",i,!1):"attachEvent"in document&&window.attachEvent("onmessage",i):window.navigator[this.prefix+this.name]=i},n.prototype.listen=function(e){for(var t=0,i=this.listenFunc.length,n=!1;t<i;t++)if(this.listenFunc[t]==e){n=!0;break}n||this.listenFunc.push(e)},n.prototype.clear=function(){this.listenFunc=[]},n.prototype.send=function(e){var t,i=this.targets;for(t in i)i.hasOwnProperty(t)&&i[t].send(e)},n}();PageMessager.prototype={listen:function(){"ready"==this.status&&(this.status="wait",this.processor())},send:function(t){try{this.messenger.send(t)}catch(e){}},_prepareReceiver:function(e){this.status="success",this.messenger.addTarget(fn.get("chat_frame").contentWindow,e),"undefined"!=typeof autoChat&&globalVisitHandle.pageChater.pageMessager.send("{cmd:'CC03'}")},processor:function(){var self=this;this.messenger.listen(function(msg){var dobj;try{switch(dobj=eval("("+msg+")"),dobj.cmd){case"CC01":self._prepareReceiver(self.media[0]),self.send("{cmd:'MC03'}");var status=globalVisitHandle.pageChater.pageDisplayState?"show":"hide";self.send("{cmd:'CP02',data:'"+status+"'}"),self.send("{cmd:'MC06',data:'"+status+"'}");break;case"CC02":globalVisitHandle.pageChater.hidePageChat(dobj.data);break;case"MC04":globalVisitHandle.pageChater.unreadMessTip(dobj.data,dobj.oname,dobj.reply);break;case"MC05":fn.addClass(document.documentElement,"lim_chat_ios_wechat_hack"),setTimeout(function(){fn.removeClass(document.documentElement,"lim_chat_ios_wechat_hack")},600);break;case"CC04":globalVisitHandle.pageChater.closePageChatForNotHidden(dobj.data);break;case"CC05":globalMobileIcon.openMobileInnerChat();break;case"CC07":globalVisitClient.pageChating=!1,globalVisitClient.initiChating=!1;break;case"CC08":globalVisitClient.pageChating=!0;break;case"PC01":globalVisitHandle.pageChater.showMessageTip();break;case"PC02":globalVisitHandle.pageChater.closePageChat(),globalVisitHandle.pageChater.autoChatControl();break;case"PC03":globalVisitClient.pageChating=!1,globalVisitClient.initiChating=!1;break;case"PC04":globalVisitClient.pageChating=!0}}catch(e){throw e}})}},vis.start()}function navigateToUrl(t,i,n){try{globalVisitHandle.pageChater.closePageChat()}catch(e){}var o,a=document.getElementById("live800:link");if(i+="undefined"!=typeof live800_chatVersion&&5==live800_chatVersion?(new Date).getTime():"",document.all&&isNeedCheckDomainBinding)if(document.URL.indexOf("preview.jsp")>-1)o=window.open(t,i,n);else try{o=window.open("about:blank",i,n),a.target=i,a.href=t,a.click()}catch(e){}else o=window.open(t,i,n);return void 0!==o&&o.focus(),o}function loadConfig(){return{companyId:live800_companyID,enterurl:enterurl||fn.urlDecode(document.URL),jid:"undefined"!=typeof jid?jid:-1,insidePageSkillId:"undefined"!=typeof insidePageSkillId?insidePageSkillId:-1,baseurl:live800_baseUrl,baseHtmlUrl:live800_baseHtmlUrl,baseWebApp:live800_baseUrl+live800_baseWebApp,baseChatHtmlDir:vis.getProtocol()+"//"+live800_baseUrl+live800_baseWebApp+live800_baseChatHtmlDir,webAppUrl:vis.getProtocol()+"//"+live800_baseHtmlUrl+live800_baseWebApp,status:live800_status,locale:live800_Language,surferNumber:"undefined"!=typeof live800_surfer_number?live800_surfer_number:0,configId:monitor_live800_configID,configContent:monitor_live800_configContent,customContent:"undefined"!=typeof live800_custom_config?live800_custom_config:"",inviteContent:"undefined"!=typeof live800_inviteContent?live800_inviteContent:"",visitorAddr:"undefined"!=typeof live800_visitorAddr?live800_visitorAddr:"",accept:invite_accept||"%E5%BC%80%E5%A7%8B%E4%BA%A4%E8%B0%88",cancel:invite_cancel||"%E5%BE%85%E4%BC%9A%E5%86%8D%E8%AF%B4",visitorIDInSession:live800_companyID+"chater",visitorInfo:"undefined"!=typeof trustfulInfo?"info="+trustfulInfo:"",scriptPath:vis.getProtocol()+"//"+live800_baseHtmlUrl+live800_baseWebApp+"/chatClient",servers:"undefined"!=typeof server_prefix_list?server_prefix_list:[vis.getProtocol()+"//"+live800_baseUrl+live800_baseWebApp]}}function JSONRequest(e,t,i,n){this.url=e,this.onload=i,this.onerror=n||this.defaultError,this.init(e,t)}function RpcMethod(e,t,i,n,o,a){this.serviceName=e,this.cmdNo=t,this.params=i,this.retryTimes=n,this.onSuccess=o,this.onError=a}function SendDriver(){this.busy=!1,this.rpcImage=null}function ReceiveDriver(){var e=cfg.webAppUrl;this.receiveDriverListeners=[],this.loadingTag=!1,this.lastMsgTime="-1",this.tagImage=new Image,this.tags=[],this.receiveTimer=null,this.exceptiontime=0;var t=vis.getParam(),i=cfg.visitorInfo;this.tagUrl=e+"/SurferServer"+jsessionId+"?cmd=101&companyID="+cfg.companyId+(""!=i?"&"+i:"")+(""!=t?"&"+t:"")+(cfg.locale&&""!=cfg.locale?"&lan="+cfg.locale:""),this.firstTagUrl="",this.firstTagSuccess=!1,this.localTyping=!1,this.reconnFlag=!1,this.csd=10,this.reconntime=0,this.initTags()}function VisitServer(){this.visitServerTimer=null}function VisitClient(){this.messageListeners=[],this.pageChating=!1,globalReceiveDriver.addReceiveDriverListener(this)}function VisitHandle(){this.chatWindow=null,this.delayTimer=null,this.initListener();var e=this;setTimeout(function(){e.pageChater=new PageChater,"undefined"!=typeof autoChat&&1==autoChat&&(fn.get("chat_frame")||globalVisitHandle.openInitiatedChat(!1))},0),this.autoInitialChat()}function InviteWindow(){this.inviteText="",this.lastTop=-1,this.lastLeft=-1,this.showInvite=!1,this.inviteInnerHtml=null,this.isauto=!0,this.inviteHandled=!0,this.operatorInvite=!0,this.toBottom=!0,this.toRight=!0,this.floatTop=150,this.isLock=!1,this.floattimer="f",this.canFixed=!0}function MobileIcon(){this.color="f",this.chat_words="",this.tel_open="",this.tel_words="",this.tel_number="",this.icon_position="",this.isDisplay=!0,this.chat_offwords="",this.company_status=0,this.init()}function PageChater(){this.client=globalVisitClient,this.handle=globalVisitHandle,this.invite="undefined"!=typeof globalInviteWindow?globalInviteWindow:null,this.icon="undefined"!=typeof globalMobileIcon?globalMobileIcon:{},this.pageMessager=new PageMessager,this.unreadMessNum=0,this.autoChatCountForPage=0,this.pageDisplayState=!1,this.autoChatTimer,this.pageStateSyncTimer=null}function PageMessager(e){this.media=["iframe","parent"],this.messenger=new Messenger(this.media[1],"LIVE800"),this.status="ready"}}(document);